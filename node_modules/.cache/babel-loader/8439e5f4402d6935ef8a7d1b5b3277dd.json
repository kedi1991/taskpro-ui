{"ast":null,"code":"import _regeneratorRuntime from\"/workspace/taskpro_api/taskpro_ui/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/workspace/taskpro_api/taskpro_ui/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _defineProperty from\"/workspace/taskpro_api/taskpro_ui/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"/workspace/taskpro_api/taskpro_ui/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _slicedToArray from\"/workspace/taskpro_api/taskpro_ui/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{Link,useHistory}from\"react-router-dom\";import styles from\"../../styles/AuthForms.module.css\";import btnStyles from\"../../styles/Button.module.css\";import appStyles from\"../../App.module.css\";import{Form,Button,Image,Col,Row,Container,Alert}from\"react-bootstrap\";import axios from\"axios\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var RegisterForm=function RegisterForm(){var _errors$username,_errors$password,_errors$password2,_errors$non_field_err;var _useState=useState({username:\"\",password1:\"\",password2:\"\"}),_useState2=_slicedToArray(_useState,2),signUpData=_useState2[0],setSignUpData=_useState2[1];var username=signUpData.username,password1=signUpData.password1,password2=signUpData.password2;var _useState3=useState({}),_useState4=_slicedToArray(_useState3,2),errors=_useState4[0],setErrors=_useState4[1];var history=useHistory();var handleChange=function handleChange(event){setSignUpData(_objectSpread(_objectSpread({},signUpData),{},_defineProperty({},event.target.name,event.target.value)));};var handleSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(event){var _err$response;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:event.preventDefault();_context.prev=1;_context.next=4;return axios.post(\"/dj-rest-auth/registration/\",signUpData);case 4://go to sign in after the registration\nhistory.push(\"/signin\");_context.next=10;break;case 7:_context.prev=7;_context.t0=_context[\"catch\"](1);//see optional chaining\nsetErrors((_err$response=_context.t0.response)===null||_err$response===void 0?void 0:_err$response.data);case 10:case\"end\":return _context.stop();}},_callee,null,[[1,7]]);}));return function handleSubmit(_x){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(Row,{className:styles.Row,children:[/*#__PURE__*/_jsxs(Col,{className:\"my-auto py-2 p-md-2\",md:6,children:[/*#__PURE__*/_jsxs(Container,{className:\"\".concat(appStyles.Content,\" p-4 \"),children:[/*#__PURE__*/_jsx(\"h1\",{className:styles.Header,children:\"sign up\"}),/*#__PURE__*/_jsxs(Form,{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(Form.Group,{controlId:\"username\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"username\"}),/*#__PURE__*/_jsx(Form.Control,{className:styles.Input,type:\"text\",placeholder:\"Username\",name:\"username\",value:username,onChange:handleChange})]}),(_errors$username=errors.username)===null||_errors$username===void 0?void 0:_errors$username.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password1\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Password\"}),/*#__PURE__*/_jsx(Form.Control,{className:styles.Input,type:\"password\",placeholder:\"Password\",name:\"password1\",value:password1,onChange:handleChange})]}),(_errors$password=errors.password1)===null||_errors$password===void 0?void 0:_errors$password.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsxs(Form.Group,{controlId:\"password2\",children:[/*#__PURE__*/_jsx(Form.Label,{className:\"d-none\",children:\"Confirm password\"}),/*#__PURE__*/_jsx(Form.Control,{className:styles.Input,type:\"password\",placeholder:\"Confirm password\",name:\"password2\",value:password2,onChange:handleChange})]}),(_errors$password2=errors.password2)===null||_errors$password2===void 0?void 0:_errors$password2.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",children:message},idx);}),/*#__PURE__*/_jsx(Button,{className:\"\".concat(btnStyles.Button,\" \").concat(btnStyles.Wide,\" \").concat(btnStyles.Bright),type:\"submit\",children:\"Sign up\"}),(_errors$non_field_err=errors.non_field_errors)===null||_errors$non_field_err===void 0?void 0:_errors$non_field_err.map(function(message,idx){return/*#__PURE__*/_jsx(Alert,{variant:\"warning\",className:\"mt-3\",children:message},idx);})]})]}),/*#__PURE__*/_jsx(Container,{className:\"mt-3 \".concat(appStyles.Content),children:/*#__PURE__*/_jsxs(Link,{className:styles.Link,to:\"/signin\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(\"span\",{children:\"Sign in\"})]})})]}),/*#__PURE__*/_jsx(Col,{md:6,className:\"my-auto d-none d-md-block p-2 \".concat(styles.SignUpCol),children:/*#__PURE__*/_jsx(Image,{className:\"\".concat(appStyles.FillerImage),src:\"https://res.cloudinary.com/dr7uvhdmd/image/upload/v1698279794/taskpro/taskmgmt_image_krhumz.png\"})})]});};export default RegisterForm;","map":{"version":3,"names":["React","useState","Link","useHistory","styles","btnStyles","appStyles","Form","Button","Image","Col","Row","Container","Alert","axios","jsx","_jsx","jsxs","_jsxs","RegisterForm","_errors$username","_errors$password","_errors$password2","_errors$non_field_err","_useState","username","password1","password2","_useState2","_slicedToArray","signUpData","setSignUpData","_useState3","_useState4","errors","setErrors","history","handleChange","event","_objectSpread","_defineProperty","target","name","value","handleSubmit","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_err$response","wrap","_callee$","_context","prev","next","preventDefault","post","push","t0","response","data","stop","_x","apply","arguments","className","children","md","concat","Content","Header","onSubmit","Group","controlId","Label","Control","Input","type","placeholder","onChange","map","message","idx","variant","Wide","Bright","non_field_errors","to","SignUpCol","FillerImage","src"],"sources":["/workspace/taskpro_api/taskpro_ui/src/pages/auth/RegisterForm.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { Link, useHistory } from \"react-router-dom\";\n\nimport styles from \"../../styles/AuthForms.module.css\";\nimport btnStyles from \"../../styles/Button.module.css\";\nimport appStyles from \"../../App.module.css\";\n\nimport {\n  Form,\n  Button,\n  Image,\n  Col,\n  Row,\n  Container,\n  Alert,\n} from \"react-bootstrap\";\nimport axios from \"axios\";\n\nconst RegisterForm = () => {\n  const [signUpData, setSignUpData] = useState({\n    username: \"\",\n    password1: \"\",\n    password2: \"\",\n  });\n  const { username, password1, password2 } = signUpData;\n\n  const [errors, setErrors] = useState({});\n\n  const history = useHistory();\n\n  const handleChange = (event) => {\n    setSignUpData({\n      ...signUpData,\n      [event.target.name]: event.target.value,\n    });\n  };\n\n  const handleSubmit = async (event) => {\n    event.preventDefault();\n    try {\n      await axios.post(\"/dj-rest-auth/registration/\", signUpData);\n      //go to sign in after the registration\n      history.push(\"/signin\");\n    } catch (err) {\n      //see optional chaining\n      setErrors(err.response?.data);\n    }\n  };\n\n  return (\n    <Row className={styles.Row}>\n      <Col className=\"my-auto py-2 p-md-2\" md={6}>\n        <Container className={`${appStyles.Content} p-4 `}>\n          <h1 className={styles.Header}>sign up</h1>\n\n          <Form onSubmit={handleSubmit}>\n            <Form.Group controlId=\"username\">\n              <Form.Label className=\"d-none\">username</Form.Label>\n              <Form.Control\n                className={styles.Input}\n                type=\"text\"\n                placeholder=\"Username\"\n                name=\"username\"\n                value={username}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.username?.map((message, idx) => (\n              <Alert variant=\"warning\" key={idx}>\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password1\">\n              <Form.Label className=\"d-none\">Password</Form.Label>\n              <Form.Control\n                className={styles.Input}\n                type=\"password\"\n                placeholder=\"Password\"\n                name=\"password1\"\n                value={password1}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password1?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Form.Group controlId=\"password2\">\n              <Form.Label className=\"d-none\">Confirm password</Form.Label>\n              <Form.Control\n                className={styles.Input}\n                type=\"password\"\n                placeholder=\"Confirm password\"\n                name=\"password2\"\n                value={password2}\n                onChange={handleChange}\n              />\n            </Form.Group>\n            {errors.password2?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\">\n                {message}\n              </Alert>\n            ))}\n\n            <Button\n              className={`${btnStyles.Button} ${btnStyles.Wide} ${btnStyles.Bright}`}\n              type=\"submit\"\n            >\n              Sign up\n            </Button>\n            {errors.non_field_errors?.map((message, idx) => (\n              <Alert key={idx} variant=\"warning\" className=\"mt-3\">\n                {message}\n              </Alert>\n            ))}\n          </Form>\n        </Container>\n\n        <Container className={`mt-3 ${appStyles.Content}`}>\n          <Link className={styles.Link} to=\"/signin\">\n            Already have an account? <span>Sign in</span>\n          </Link>\n        </Container>\n      </Col>\n      <Col\n        md={6}\n        className={`my-auto d-none d-md-block p-2 ${styles.SignUpCol}`}\n      >\n        <Image\n          className={`${appStyles.FillerImage}`}\n          src={\"https://res.cloudinary.com/dr7uvhdmd/image/upload/v1698279794/taskpro/taskmgmt_image_krhumz.png\"}\n        />\n      </Col>\n    </Row>\n  );\n};\n\nexport default RegisterForm;"],"mappings":"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"},"metadata":{},"sourceType":"module"}